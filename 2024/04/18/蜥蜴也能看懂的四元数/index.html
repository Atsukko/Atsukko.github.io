<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/maru_32x32.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/maru_16x16.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"atsukko.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="article">
<meta property="og:title" content="&#39;蜥蜴也能看懂的四元数！&#39;">
<meta property="og:url" content="http://atsukko.github.io/2024/04/18/%E8%9C%A5%E8%9C%B4%E4%B9%9F%E8%83%BD%E7%9C%8B%E6%87%82%E7%9A%84%E5%9B%9B%E5%85%83%E6%95%B0/index.html">
<meta property="og:site_name" content="Atsukko&#39;s Deep Dark Dungeon">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-04-18T14:25:59.000Z">
<meta property="article:modified_time" content="2024-05-04T16:26:36.354Z">
<meta property="article:author" content="Atsukko">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://atsukko.github.io/2024/04/18/%E8%9C%A5%E8%9C%B4%E4%B9%9F%E8%83%BD%E7%9C%8B%E6%87%82%E7%9A%84%E5%9B%9B%E5%85%83%E6%95%B0/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://atsukko.github.io/2024/04/18/%E8%9C%A5%E8%9C%B4%E4%B9%9F%E8%83%BD%E7%9C%8B%E6%87%82%E7%9A%84%E5%9B%9B%E5%85%83%E6%95%B0/","path":"2024/04/18/蜥蜴也能看懂的四元数/","title":"'蜥蜴也能看懂的四元数！'"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>'蜥蜴也能看懂的四元数！' | Atsukko's Deep Dark Dungeon</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Atsukko's Deep Dark Dungeon</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E8%AE%A9%E8%9C%A5%E8%9C%B4%E7%9C%8B%E6%98%8E%E7%99%BD%E5%85%AC%E5%BC%8F%E8%A7%A3%E6%9E%90%E5%92%8C%E7%94%A8%E6%B3%95%E4%B8%BE%E4%BE%8B"><span class="nav-text">第一部分
让蜥蜴看明白！公式解析和用法举例!</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%8B%E8%BD%AC%E5%85%AC%E5%BC%8F"><span class="nav-text">1. 旋转公式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E5%85%83%E6%95%B0"><span class="nav-text">2. 四元数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E5%85%83%E6%95%B0%E7%9A%84%E7%94%A8%E6%B3%95"><span class="nav-text">3. 四元数的用法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E8%9C%A5%E8%9C%B4%E7%A7%91%E5%AD%A6%E5%AE%B6%E6%89%8D%E8%83%BD%E7%9C%8B%E6%87%82%E5%85%AC%E5%BC%8F%E6%8E%A8%E5%AF%BC%E4%B8%8E%E6%95%B0%E5%AD%A6%E8%AF%81%E6%98%8E"><span class="nav-text">第二部分
蜥蜴科学家才能看懂！公式推导与数学证明！</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E7%BB%B4%E7%A9%BA%E9%97%B4%E4%B8%AD%E7%9A%84%E6%97%8B%E8%BD%AC"><span class="nav-text">1. 三维空间中的旋转</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%8B%E8%BD%AC%E5%88%86%E8%A7%A3"><span class="nav-text">1.1 旋转分解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v_parallel%E7%9A%84%E6%97%8B%E8%BD%AC"><span class="nav-text">1.2 \(v_{\parallel}\)的旋转</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v_perp%E7%9A%84%E6%97%8B%E8%BD%AC"><span class="nav-text">1.3 \(v_{\perp}\)的旋转</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v%E7%9A%84%E6%97%8B%E8%BD%AC"><span class="nav-text">1.3 \(v\)的旋转</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E5%85%83%E6%95%B0-1"><span class="nav-text">2. 四元数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9B%E5%85%83%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E6%80%A7%E8%B4%A8"><span class="nav-text">2.1 四元数的定义与性质</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%9B%E5%85%83%E6%95%B0%E4%B9%98%E6%B3%95"><span class="nav-text">2.1.1 四元数乘法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BA%AF%E5%9B%9B%E5%85%83%E6%95%B0"><span class="nav-text">2.1.2 纯四元数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%86%E5%92%8C%E5%85%B1%E8%BD%AD"><span class="nav-text">2.1.3 逆和共轭</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9B%E5%85%83%E6%95%B0%E4%B8%8E%E4%B8%89%E7%BB%B4%E6%97%8B%E8%BD%AC"><span class="nav-text">2.2 四元数与三维旋转</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#v_parallel%E7%9A%84%E6%97%8B%E8%BD%AC-1"><span class="nav-text">2.2.1 \(v_{\parallel}\)的旋转</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v_perp%E7%9A%84%E6%97%8B%E8%BD%AC-1"><span class="nav-text">2.2.2 \(v_{\perp}\)的旋转</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Atsukko</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">1</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Atsukko" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Atsukko" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://atsukko.github.io/2024/04/18/%E8%9C%A5%E8%9C%B4%E4%B9%9F%E8%83%BD%E7%9C%8B%E6%87%82%E7%9A%84%E5%9B%9B%E5%85%83%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Atsukko">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Atsukko's Deep Dark Dungeon">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="'蜥蜴也能看懂的四元数！' | Atsukko's Deep Dark Dungeon">
      <meta itemprop="description" content=" ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          '蜥蜴也能看懂的四元数！'
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-04-18 22:25:59" itemprop="dateCreated datePublished" datetime="2024-04-18T22:25:59+08:00">2024-04-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-05-05 00:26:36" itemprop="dateModified" datetime="2024-05-05T00:26:36+08:00">2024-05-05</time>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

            <div class="post-description"> </div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><em>阅读本文前，您需要事先了解<strong>向量</strong>和<strong>虚数</strong>的概念</em></p>
<p>要搞懂四元数，得由浅入深，不妨先问是什么？干什么？为什么？怎么办？</p>
<ul>
<li><p>是什么？答：四元数是一个<strong>虚数</strong></p></li>
<li><p>干什么？答：四元数用来表示三维空间中的<strong>旋转</strong></p></li>
<li><p>为什么？答：避免了用欧拉角描述旋转的<strong>万向节死锁</strong><em>(Gimbal
Lock)</em>问题</p></li>
<li><p>怎么办？答：套公式（真是公公又式式阿）</p></li>
</ul>
<p>本文会通过两个部分，由浅至深地分析四元数.第一部分包括其原理公式和基本用法，用最易懂的语言回答以上几个问题；如果你想深究其原理可继续阅读第二部分，其包括从解析几何到四元数的详细数学证明.</p>
<h1 id="第一部分-让蜥蜴看明白公式解析和用法举例">第一部分
让蜥蜴看明白！公式解析和用法举例!</h1>
<h2 id="旋转公式">1. 旋转公式</h2>
<p><span class="math display">\[\begin{equation}\label{eqn-1}
v&#39;=qvq^*
\end{equation}\]</span></p>
<p>其中：<br />
<span class="math inline">\(v:\)</span> 需要应用旋转的原向量<br />
<span class="math inline">\(v’:\)</span> 应用旋转后得到的向量<br />
<span class="math inline">\(q:\)</span> 该旋转对应的四元数<br />
<span class="math inline">\(q^*:\)</span> 四元数q的共轭</p>
<p>   我想这个公式已经足够明了了，原向量<span
class="math inline">\(v\)</span>通过与四元数<span
class="math inline">\(q\)</span>的某些运算后就能得到旋转后的新向量<span
class="math inline">\(v&#39;\)</span>，<del>蜥蜴表示：什么是向量？</del>
那么现在的问题就是这个<span
class="math inline">\(q\)</span>是什么东西？</p>
<h2 id="四元数">2. 四元数</h2>
<p>  这里先给出四元数<span
class="math inline">\(q\)</span>的表达式：<br />
<span class="math display">\[
q=[\cos \theta ,u\sin \theta ]
\]</span></p>
<p>其中：<br />
<span class="math inline">\(\theta:\)</span> 旋转的角度<br />
<span class="math inline">\(u:\)</span> 转轴向量</p>
<p>  显而易见，<span class="math inline">\(q\)</span>通过转轴向量<span
class="math inline">\(u\)</span>和旋转角度<span
class="math inline">\(\theta\)</span>描述了一个旋转，那么这里的中括号又表示什么意思呢？在第一部分我只大概描述一下，更深入的分析可转到第二部分.<br />
  这里的大括号表示方法是在描述一个<strong>虚数</strong>，这一概念在开头已经提过，四元数本质上就是一个虚数，在中括号内，逗号前是实部，通常是一个实数（如上式中的<span
class="math inline">\(\cos
\theta\)</span>）；逗号后是虚部，通常是一个向量 （如上式中的<span
class="math inline">\(u\sin \theta\)</span>）.<br />
  但是通常来说，虚数的实部与虚部不应该分别是一个实数吗？这个向量又是怎么回事呢？这个问题很简单，四元数四元数，“四”是哪来的呢？其实是一个实部，加上虚部向量的三个分量，加起来就是四元数嘛.在本科高数课堂上我们学到的虚数大部分情况下只包含一个虚数单位，也就是大名鼎鼎的<span
class="math inline">\(i\)</span>，在四元数中，我们又引入了另外2个虚数单位，<span
class="math inline">\(j\)</span>和<span
class="math inline">\(k\)</span>，三个虚数单位的系数，不就对应了虚部向量的三个分量嘛.</p>
<p>由此，令<span
class="math inline">\(u=[u_x,u_y,u_z]^T\)</span>，我们可以给出四元数<span
class="math inline">\(q\)</span>更具体的表达式：</p>
<p><span class="math display">\[
q=\sin \theta + u_x\cos \theta *i + u_y\cos \theta *j + u_z\cos \theta
*k
\]</span></p>
<p>  那么，现在又有新的问题出现了，在旋转公式中是怎么实现向量和四元数的乘法的呢？答案是把向量写成纯四元数（实部为0的四元数）的形式，至于把向量转换为纯四元数以及四元数运算的细节我们到下一部分再展开聊聊<del>再聊下去就要偏题了！</del>.</p>
<h2 id="四元数的用法">3. 四元数的用法</h2>
<p>  到这里，我们要做什么事情应该是非常清晰的：<font color=red>通过指定转轴<span
class="math inline">\(u\)</span>和转角<span
class="math inline">\(\theta\)</span>描述一个旋转！</font>那么谁来执行这个旋转呢？当然是把参数传给API让引擎完成了！</p>
<p>  例如，Unity引擎的旋转就是由四元数实现的，它在四元数类Quaternion中为我们提供了一系列底层通过四元数描述三维空间中旋转的方法，例如下面这行C#代码：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Debug.Log(Quaternion.FromToRotation(<span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>), <span class="keyword">new</span> Vector3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)));</span><br></pre></td></tr></table></figure>
<p>  控制台输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(0.00000, 0.70711, 0.00000, 0.70711)</span><br></pre></td></tr></table></figure>
<p>  首先来看这行C#代码，Debug.Log()是Unity引擎提供的调试方法，将指定内容打印在编辑器控制台里；Quaternion类的静态方法FromToRotation()接受两个Vector3类型的参数（Vector3就是Unity引擎定义的三维向量类型），假设其分别为<span
class="math inline">\(v_{1}\)</span>和<span
class="math inline">\(v_{2}\)</span>，该方法会返回将<span
class="math inline">\(v_{1}\)</span>旋转至<span
class="math inline">\(v_{2}\)</span>需要的四元数，在这个例子中，它返回将向量<span
class="math inline">\((0, 0, 1)\)</span>旋转至向量<span
class="math inline">\((1, 0,
0)\)</span>所需要的四元数，也就是我们的输出结果.</p>
<p>  Unity中的四元数表示为<span class="math inline">\((x, y, z,
w)\)</span>，前三个维度表示转轴向量，在本例中是<span
class="math inline">\((0.00000, 0.70711,
0.00000)\)</span>，跟y轴同方向，而<span
class="math inline">\(w\)</span>表示<span
class="math inline">\(cos(\frac{\theta}{2})\)</span>.对数字敏感的朋友可能已经发现了，<span
class="math inline">\(0.70711\)</span>就是<span
class="math inline">\(\frac{\sqrt{2}}{2}\)</span>的近似值，也就是说，<span
class="math inline">\(cos(\frac{\theta}{2}) =
\frac{\sqrt{2}}{2}\)</span>，那么，<span class="math inline">\(\theta =
\frac{\pi}{2}\)</span>，也就是<span
class="math inline">\(90°\)</span>，于是，将这个四元数翻译成人话就是，<strong>绕y轴旋转<span
class="math inline">\(90°\)</span></strong>！</p>
<p>  还有一个小问题，也就是为什么转轴向量也要用0.70711表示，转轴向量的模不是应该没有意义吗？这里其实是因为这个方法对返回值结果做了一个规范化，调整转轴向量的模长，使整个四元数的模为1，你可以试试不同的四元数对它们的4维的值做平方和，计算结果一定为1（准确来说是近似为1）.</p>
<p>  还有一个小小问题，从这个例子我们可以看出来Unity引擎在做旋转计算时采用的是<strong>左手坐标系</strong>：伸出你的左手，大拇指与转轴向量同向，其余四指握拳，它们指向的方向就是旋转的方向，在这里就是左手大拇指指向y轴方向，四指旋转方向就是<span
class="math inline">\((0, 0, 1)\)</span>（z轴方向）转向<span
class="math inline">\((1, 0,
0)\)</span>（x轴方向）的方向，不难推理，如果把这个方法的两个参数顺序反过来的话，转轴向量应该变成<span
class="math inline">\((0.00000, -0.70711, 0.00000)\)</span>而<span
class="math inline">\(w\)</span>不变，事实上也确实是这样.</p>
<h1 id="第二部分-蜥蜴科学家才能看懂公式推导与数学证明">第二部分
蜥蜴科学家才能看懂！公式推导与数学证明！</h1>
<p>  好了，到了这一部分，普通蜥蜴可能已经看不懂了，但是只需要再聪明一点点，蜥蜴科学家就可以看懂，理所当然地，作为21世纪人类的你肯定能看懂<del>，至少我对我的表达能力有这么自信</del>.</p>
<p>  首先，在讨论任何事情之前，我希望先缕清我们到底想干什么，这里，我们想做的事是<strong>通过解析几何推出三维空间中旋转的一般式，再通过把向量替换成四元数，得到由四元数表示的旋转公式！</strong>
时刻记住我们的主线任务！</p>
<h2 id="三维空间中的旋转">1. 三维空间中的旋转</h2>
<p>  在空间几何中，三维向量既可以表示一个方向，也可以表示一个空间中的点，例如<span
class="math inline">\((1, 0, 0)\)</span>既可以表示<span
class="math inline">\(x\)</span>轴方向长度为1的向量，也可以表示<span
class="math inline">\(x\)</span>轴上与原点距离为1的一个点，它们在向量的表示方法上并不做区分，当然，在齐次坐标中可以通过第4个维度<span
class="math inline">\(w\)</span>值区分向量和点，但在这里我们暂时用不到齐次坐标，并且，我们仅考虑向量的旋转，所以，我们<strong>默认向量的起点都是原点</strong>，哪怕在实际应用中，向量的起点可能并不是原点，你仍可以把它平移到原点，完成旋转后，再反向平移回原位.</p>
<p>  注意，在这里我们使用<strong>右手坐标系</strong>，右手拇指指向z轴，四指便从x轴指向y轴，不要和之前讲的Unity使用的左手坐标系搞混了！</p>
<p>  现有考虑这样一个场景，这个场景在第一部分讨论过，也就是向量<span
class="math inline">\(v\)</span>绕转轴<span
class="math inline">\(u\)</span>旋转<span
class="math inline">\(\theta\)</span>角度，得到新的向量<span
class="math inline">\(v&#39;\)</span>.现在我们让转轴<span
class="math inline">\(u\)</span>与z轴重合，并且为了计算方便，我们令<span
class="math inline">\(u\)</span>为单位向量，即</p>
<p><span class="math display">\[
u = (0, 0, 1)
\]</span></p>
<p>  我们怎么从空间几何角度描述这个旋转呢？一个容易想到的方法就是<strong>把向量<span
class="math inline">\(v\)</span>分解为平行于<span
class="math inline">\(u\)</span>和垂直于<span
class="math inline">\(u\)</span>的两个分量<span
class="math inline">\(v_{\perp}\)</span>和<span
class="math inline">\(v_{\parallel}\)</span></strong>，分别对它们做旋转得到旋转后的两个分量<span
class="math inline">\(v_{\perp}’\)</span>和<span
class="math inline">\(v_{\parallel}&#39;\)</span>，再把它们两个加和起来，便得到了<span
class="math inline">\(v&#39;\)</span></p>
<h3 id="旋转分解">1.1 旋转分解</h3>
<p>  按之前提出的方法，把<span
class="math inline">\(v\)</span>分解为垂直和平行于<span
class="math inline">\(u\)</span>的两个分量，即</p>
<p><span class="math display">\[
v = v_{\parallel} + v_{\perp}
\]</span></p>
<p>  将两个分量分别旋转后，就可以得到我们希望得到的旋转后的结果<span
class="math inline">\(v&#39;\)</span>，即</p>
<p><span class="math display">\[
v&#39; = v_{\parallel}&#39; + v_{\perp}&#39;
\]</span></p>
<p>  好了，我们要做的事很清晰了，即先想办法表示出两个分量，再考虑对它们进行旋转.</p>
<p>  首先，将向量<span
class="math inline">\(v\)</span>分别正交投影到平行于<span
class="math inline">\(u\)</span>和垂直于<span
class="math inline">\(u\)</span>的两个方向上，即</p>
<p><span class="math display">\[
v_{\parallel} = \frac{u \cdot v}{u \cdot u}u
\]</span> <span class="math display">\[
\space\space\space\space\space = (u \cdot v)u
\]</span></p>
<p>  注意，之前提到过<span
class="math inline">\(u\)</span>是单位向量，所以<span
class="math inline">\(u \cdot u\)</span>结果为1.</p>
<p><span class="math display">\[
v_{\perp} = v - v_{\parallel}
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space
= v - (u \cdot v)u
\]</span></p>
<p>  这样，我们就将水平分量和垂直分量用<span
class="math inline">\(u\)</span>和<span
class="math inline">\(v\)</span>的向量运算表示出来了.接下来，我们会分别对它们进行旋转.</p>
<h3 id="v_parallel的旋转">1.2 <span
class="math inline">\(v_{\parallel}\)</span>的旋转</h3>
<p>  首先是平行于<span class="math inline">\(u\)</span>的<span
class="math inline">\(v_{\parallel}\)</span>，由于<span
class="math inline">\(v_{\parallel}\)</span>与<span
class="math inline">\(u\)</span>重合，不难知道它绕<span
class="math inline">\(u\)</span>旋转的结果就是它自己，也就是说我们不需要做任何额外的计算（太好了），即</p>
<p><span class="math display">\[
v_{\parallel}&#39; = v_{\parallel}
\]</span></p>
<h3 id="v_perp的旋转">1.3 <span
class="math inline">\(v_{\perp}\)</span>的旋转</h3>
<p>  由于<span class="math inline">\(v_{\perp}\)</span>正交于<span
class="math inline">\(u\)</span>，所以<span
class="math inline">\(v_{\perp}\)</span>的旋转是在一个正交于<span
class="math inline">\(u\)</span>的平面上进行的，并且由于向量在旋转时模不变，所以其旋转路径是一个圆，由此，我们把空间几何问题转换为了平面几何问题.</p>
<p>  在这个圆内，我们可以再做一次分解，把旋转后的<span
class="math inline">\(v_{\perp}&#39;\)</span>分解为平行于<span
class="math inline">\(v_{\perp}\)</span>的<span
class="math inline">\(v_{\nu}\)</span>和垂直于<span
class="math inline">\(v_{\perp}\)</span>的<span
class="math inline">\(v_{\omega}\)</span>，这个垂直方向可以由<span
class="math inline">\(u\)</span>叉乘<span
class="math inline">\(v_{\perp}\)</span>得到，我们令它为<span
class="math inline">\(w\)</span>，即</p>
<p><span class="math display">\[
w = u \times v_{\perp}
\]</span></p>
<p>  我直接给出结论：<span class="math inline">\(w\)</span>的模等于<span
class="math inline">\(v_{\perp}\)</span>的模，所以它刚好在圆上，证明参考<a
href="#fn1" class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a>.于是我们有 <span
class="math display">\[
v_{\perp}&#39; = v_{\nu}&#39; + v_{\omega}&#39;
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space
= \cos(\theta) v_{\perp} + \sin(\theta) w
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space
= \cos(\theta) v_{\perp} + \sin(\theta) (u \times v_{\perp})
\]</span></p>
<p>  由此，我们将<span
class="math inline">\(v_{\perp}&#39;\)</span>用<span
class="math inline">\(v_{\perp}\)</span>, <span
class="math inline">\(u\)</span>和<span
class="math inline">\(\theta\)</span>表示出来了</p>
<h3 id="v的旋转">1.3 <span class="math inline">\(v\)</span>的旋转</h3>
<p>  现在，我们只需要将旋转后的两个分量进行向量加和即可得到原始向量<span
class="math inline">\(v\)</span>旋转后得到的结果了，即 <span
class="math display">\[
v&#39; = v_{\parallel}&#39; + v_{\perp}&#39;
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space
= v_{\parallel} + \cos(\theta)v_{\perp} + \sin(\theta)(u \times
v_{\perp})
\]</span></p>
<p>  代入<span class="math inline">\(v_{\parallel}\)</span>和<span
class="math inline">\(v_{\perp}\)</span>，再利用叉乘分配律，以及正交向量叉乘结果为0的结论，我们可将上式化为
<span class="math display">\[
v&#39; = \cos(\theta)v + (1 - cos(\theta))(u \cdot v)u + \sin(\theta)(u
\times v)
\]</span></p>
<p>  好了，皆大欢喜(暂时的)，空间几何的推导部分结束了，我们写出了<span
class="math inline">\(v&#39;\)</span>用<span
class="math inline">\(u\)</span>, <span
class="math inline">\(v\)</span>, <span
class="math inline">\(\theta\)</span>表示的一般式，也就是空间旋转公式.<br />
  目前的公式看起来似乎跟四元数没什么关系，别急，接下来，我们就要开始引入四元数来爆改旋转公式了！还记得我们的主线任务吗？如果你不记得了，它在<a
href="#第二部分-蜥蜴科学家才能看懂公式推导与数学证明">第二部分</a>的开头，一定要记住，我们得在把握全局的前提下再钻进细节研究！</p>
<h2 id="四元数-1">2. 四元数</h2>
<p>  我们在<a
href="#第一部分-让蜥蜴看明白公式解析和用法举例">第一部分</a>简单讲了下四元数，回顾一下，它本质上是一个虚数，有一个实部和三个虚部（<strong>注意，严格定义下的虚部指的是虚数单位前的系数</strong>），三个虚数单位分别为<span
class="math inline">\(i\)</span>, <span
class="math inline">\(j\)</span>, <span
class="math inline">\(k\)</span>，即</p>
<p><span class="math display">\[
q = a + bi + cj + dk, \space\space\space\space (a, b, c, d \in
\mathbb{R})
\]</span></p>
<p>  其中 <span class="math display">\[
i^2 = j^2 = k^2 = ijk = -1
\]</span></p>
<p>  虚数单位的平方等于-1很好理解，至于这个<span
class="math inline">\(ijk\)</span>为什么等于-1我们不久后就会详细展开.</p>
<p>  可以看出四元数就是对于基<span
class="math inline">\(\{1,i,j,k\}\)</span>的线性组合，所以可以将它写成向量形式</p>
<p><span class="math display">\[
q =
\begin{bmatrix}
a\\
b\\
c\\
d
\end{bmatrix}
\]</span></p>
<p>  其中，<span class="math inline">\(a\)</span>是实部，<span
class="math inline">\(b\)</span>, <span
class="math inline">\(c\)</span>, <span
class="math inline">\(d\)</span>分别是三个虚部（也就是三个虚数单位的系数）.我们可以把虚部的三个分量写成一个三维向量的形式，就可以把它转化成我们在之前看到的四元数的表示形式，即<br />
<span class="math display">\[
q = [s, v], \space\space\space\space (v =
\begin{bmatrix}
x\\
y\\
z
\end{bmatrix}, s, x, y, z \in \mathbb{R})
\]</span></p>
<h3 id="四元数的定义与性质">2.1 四元数的定义与性质</h3>
<p>  到这里我们还没把四元数和三维空间的旋转联系起来，因为在那之前需要先对四元数的一些相关定义和性质（比如四元数运算法则）有一定了解，我不想让这篇文章过于冗长，所以一些较为容易理解的内容（如四元数加法）我就放到之后用到这一性质的地方再简单提及，这部分只讨论一些不太容易理解的定义和性质.</p>
<h4 id="四元数乘法">2.1.1 四元数乘法</h4>
<p>  四元数之间的乘法<strong>不遵守</strong>交换律，也就是说四元数乘法有左乘和右乘的区别，除此之外，四元数乘法<strong>符合</strong>结合律和分配律，那么我们可以写出两个四元数的乘积公式
<span class="math display">\[
\space\space\space\space\space\space\space\space\space q_{1}q_{2} = (a +
bi + cj + dk) (e + fi + gj + hk)
\]</span> <span class="math display">\[
= ae + afi + agj + ahk +
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space bei + bfi^2 + bgij +
bjik +
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space cej + cfji +
cgj^2 + chjk +
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space dek + dfki + dgkj
+ dhk^2
\]</span></p>
<p>  可以看到结果非常复杂，但是我们可以通过虚数单位<span
class="math inline">\(i\)</span>, <span
class="math inline">\(j\)</span>, <span
class="math inline">\(k\)</span>之间的乘法法则来化简这个结果，我所参考的教程给出了一张表格列出了它们三者之间互乘所得到的结果，但我觉得这样去死记硬背效率不高，我自己想出来的方法是将<span
class="math inline">\(i\)</span>, <span
class="math inline">\(j\)</span>, <span
class="math inline">\(k\)</span>分别想象成符合<strong>右手定则</strong>的三维坐标系的三个相互正交的坐标轴，即<span
class="math inline">\(i \times j =
k\)</span>，把三个虚数单位的乘法理解成这三个个坐标轴向量的叉乘，你就可以解决所有虚数单位相乘的问题了，例如<span
class="math inline">\(ik = -j\)</span>（<span
class="math inline">\(i\)</span>轴叉乘<span
class="math inline">\(k\)</span>轴得到<span
class="math inline">\(j\)</span>轴的负方向）, <span
class="math inline">\(ijk = -1\)</span>（<span
class="math inline">\(i\)</span>轴叉乘<span
class="math inline">\(j\)</span>轴得到<span
class="math inline">\(k\)</span>轴，虚数单位<span
class="math inline">\(kk = -1\)</span>）.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><span
class="math inline">\(\times\)</span></th>
<th style="text-align: center;"><span
class="math inline">\(1\)</span></th>
<th style="text-align: center;"><span
class="math inline">\(i\)</span></th>
<th style="text-align: center;"><span
class="math inline">\(j\)</span></th>
<th style="text-align: center;"><span
class="math inline">\(k\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(1\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(1\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(i\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(j\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(k\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(i\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(i\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(-1\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(k\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(-j\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(j\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(j\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(-k\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(-1\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(i\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(k\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(k\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(j\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(-i\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(-1\)</span></td>
</tr>
</tbody>
</table>
<p>  我把这个表格贴在这里，你可以试试我所说的方法是否正确.</p>
<p>  利用虚数单位的乘法性质，我们可以把上式化简</p>
<p><span class="math display">\[
q_{1}q_{2} = (ae - bf - cg - dh)+
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space(be
+ af - dg + ch)i+
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space(ce
+ df + ag - bh)j+
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space(de -
cf + bg + ah)k
\]</span></p>
<p>  可以看到，两个四元数相乘结果化简后同样是一个对于基<span
class="math inline">\(\{1,i,j,k\}\)</span>的线性组合，注意上式的结构，我把它写成了一个比较工整的形式，每一项的系数多项式中都有<span
class="math inline">\(e\)</span>, <span
class="math inline">\(f\)</span>, <span
class="math inline">\(g\)</span>, <span
class="math inline">\(h\)</span>项，那么显而易见，上式可以写成矩阵形式，</p>
<p><span class="math display">\[
q_{1}q_{2} =
\begin{bmatrix}
a &amp;-b &amp;-c&amp;-d\\
b &amp; a &amp;-d&amp; c\\
c &amp; d &amp; a&amp;-b\\
d &amp;-c &amp; b&amp; a
\end{bmatrix}
\begin{bmatrix}
e\\
f\\
g\\
h
\end{bmatrix}
\]</span></p>
<p>  而<span class="math inline">\([e, f, g,
h]^T\)</span>是不是很眼熟，它就是<span
class="math inline">\(q_{2}\)</span>的向量形式，所以上式这个矩阵变换等价于左乘<span
class="math inline">\(q_{1}\)</span>.</p>
<p>  接下来我们再把上面这个式子整理一下 <span class="math display">\[
q_{1}q_{2} = (ae - (bf + cg + dh))+
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space(be
+ af + ch - dg)i+
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space(ce
+ ag +  df - bh)j+
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space(de +
ah + bg - cf)k
\]</span>   这个式子就有了一定的规律，如果没看出来，先别急，我们令<span
class="math inline">\(v =
\begin{bmatrix}
b\\
c\\
d
\end{bmatrix}\)</span>, <span class="math inline">\(u =
\begin{bmatrix}
b\\
c\\
d
\end{bmatrix}\)</span>，那么 <span class="math display">\[
v \cdot u = bf + cg + dh.
\]</span> <span class="math display">\[
v \times u =
\begin{bmatrix}
i &amp; j &amp; k\\
b &amp; c &amp; d\\
f &amp; g &amp; h\\
\end{bmatrix}
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space=
(ch - dg)i - (bh - df)j + (bg - cf)k.
\]</span></p>
<p>  不难看出，<span class="math inline">\(q_{1}\)</span>和<span
class="math inline">\(q_{2}\)</span>相乘就可以用<span
class="math inline">\(v\)</span>和<span
class="math inline">\(u\)</span>化简，得 <span class="math display">\[
q_{1}q_{2} = [ae - v \cdot u, au + ev + v \times u]
\]</span></p>
<p>  不知道你还记不记得，<span class="math inline">\(a\)</span>和<span
class="math inline">\(e\)</span>分别是<span
class="math inline">\(q_{1}\)</span>和<span
class="math inline">\(q_{2}\)</span>的实部，而<span
class="math inline">\(v\)</span>和<span
class="math inline">\(u\)</span>分别是它们的虚部向量，这样，四元数乘法的通式就写出来了.</p>
<h4 id="纯四元数">2.1.2 纯四元数</h4>
<p>  纯四元数的定义：实部为0的四元数，即 <span class="math display">\[
q = [0, v]
\]</span>
  因为纯四元数只有虚部向量，所以可以用纯四元数表示任何三维向量，也就是说<strong>可以将任何三维空间的向量表示为纯四元数的形式，这是将四元数与三维旋转联系起来的重要特性！</strong>
  此外，纯四元数还有一个重要特性：如果有两个纯四元数<span
class="math inline">\(v = [0, v]\)</span>, <span class="math inline">\(u
= [0, u]\)</span>，则 <span class="math display">\[
vu = [-v \cdot u, v \times u]
\]</span></p>
<h4 id="逆和共轭">2.1.3 逆和共轭</h4>
<p>  四元数并不遵守乘法交换律，所以我们不会将四元数相除写作<span
class="math inline">\(\frac{p}{q}\)</span>的形式，而是将乘法的逆运算定义为<span
class="math inline">\(pq^-\)</span>或<span
class="math inline">\(q^-p\)</span>，其中<span
class="math inline">\(q^-\)</span>是<span
class="math inline">\(q\)</span>的逆，规定 <span class="math display">\[
qq^{-1} = q^-q = 1\space\space\space\space (q \ne 0)
\]</span>
  你会发现四元数和矩阵有异曲同工之妙，它们都分左乘右乘的概念，并且它们都有逆的概念.<br />
  要在无数的四元数中找到一个满足<span
class="math inline">\(qq^{-1}\)</span>非常困难，所以我们需要引入另一个概念叫做四元数的共轭，来帮助我们获得<span
class="math inline">\(q^-\)</span>.<br />
  我们定义一个四元数<span class="math inline">\(q = a + bi + cj +
dk\)</span>的共轭为<span class="math inline">\(q^* = a - bi - cj -
dk\)</span>,
可以看到共轭就是将四元数的虚部取相反数，如果用标量向量有序对的形式来表示<span
class="math inline">\(q[s,v]\)</span>的共轭的话就是<span
class="math inline">\(q[s,-v]\)</span>，共轭的有用性质是 <span
class="math display">\[
qq^* = [s,v] \cdot [s,-v]
\]</span></p>
<p><span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space
= [s^2 - v \cdot (-v), s(-v) + sv + v \times (-v)]
\]</span></p>
<p><span class="math display">\[
\space\space\space\space\space\space = [s^2 + v \cdot v, 0].
\]</span></p>
<p>  注意到结果的虚部为0，也就是说<span
class="math inline">\(qq^*\)</span>的结果是一个标量<span
class="math inline">\(s^2 + v \cdot
v\)</span>！而且它的值正好是四元数<span
class="math inline">\(q\)</span>模长的平方！即 <span
class="math display">\[
qq* = ||q||^2
\]</span>   同时，由于<span class="math inline">\((q^*)^* = [s, -(-v)] =
[s, v] = q\)</span>， <span class="math display">\[
\space\space\space\space\space\space\space\space q^*q = (q^*)(q^*)^*
\]</span></p>
<p><span class="math display">\[
\space\space\space\space\space\space\space\space = ||q^*||^2
\]</span></p>
<p><span class="math display">\[
\space\space\space\space\space\space = ||q||^2
\]</span></p>
<p><span class="math display">\[
\space\space\space\space = qq^*
\]</span></p>
<p>  所以有<span class="math inline">\(qq^* =
q^*q\)</span>这个特殊乘法符合交换律.
  有了共轭这个工具，我们就可以更方便地表示四元数的逆<span
class="math inline">\(q^-\)</span>了</p>
<p><span class="math display">\[
\space\space\space\space\space\space\space qq^{-1} = 1
\]</span></p>
<p><span class="math display">\[
\space\space\space\space\space q^*qq^{-1} = q^*
\]</span></p>
<p><span class="math display">\[
\space\space (q^*q)q^{-1} = q^*
\]</span></p>
<p><span class="math display">\[
||q||^2 \cdot q^{-1} = q^*
\]</span></p>
<p><span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space
q^{-1} = \frac{q^*}{||q||^2}
\]</span></p>
<p>  好了，通过共轭，我们很高效地找到了<span
class="math inline">\(q^{-1}\)</span>，特殊地，如果<span
class="math inline">\(||q|| = 1\)</span>，也就是说<span
class="math inline">\(q\)</span>是一个单位四元数，那么 <span
class="math display">\[
q^{-1} = q^*
\]</span></p>
<h3 id="四元数与三维旋转">2.2 四元数与三维旋转</h3>
<p>  激动的心，颤抖的手，终于到了把四元数和三维旋转真正联系起来的时候了，你还记得我们的主线任务吗？如果你忘记了，看看<a
href="#第二部分-蜥蜴科学家才能看懂公式推导与数学证明">第二部分</a>开头部分吧.</p>
<p>  正如在纯四元数那一节讲的，纯四元数是将四元数和三维旋转联系起来的重要概念，任意三维向量都可以写作纯四元数的形式，我们现在将三维旋转部分推导出的旋转公式中的相关向量转换为纯四元数的形式
<span class="math display">\[
v = [0, v]
\]</span> <span class="math display">\[
v&#39; = [0, v&#39;]
\]</span> <span class="math display">\[
\space\space\space v_{\perp} = [0, v_{perp}]
\]</span> <span class="math display">\[
\space\space\space v_{\perp}&#39; = [0, v_{perp}&#39;]
\]</span> <span class="math display">\[
v_{\parallel} = [0, v_{\parallel}]
\]</span> <span class="math display">\[
v_{\parallel}&#39; = [0, v_{\parallel}&#39;]
\]</span> <span class="math display">\[
u = [0, u]
\]</span>
  从这里开始，除非我特别说明，否则我们将在公式使用的都是四元数，而不是向量，比如，以下两个公式
<span class="math display">\[
v = v_{\parallel} + v_{\perp}
\]</span> <span class="math display">\[
v‘ = v_{\parallel}’ + v_{\perp}‘
\]</span>
  其中的所有字母表示的都是四元数，而非向量，并且这两个公式显而易见是成立的，我们接下来的推导就围绕这两个公式而展开！</p>
<h4 id="v_parallel的旋转-1">2.2.1 <span
class="math inline">\(v_{\parallel}\)</span>的旋转</h4>
<p>  正如在1.2中讨论的一样，因为<span
class="math inline">\(v_{\parallel}\)</span><font color = red>向量</font>与转轴<font color = red>向量</font><span
class="math inline">\(u\)</span>重合，所以它旋转后还是它自己，所以 <span
class="math display">\[
v_{\parallel}&#39; = v_{\parallel}
\]</span>
  以防你还没习惯这样的表述，在这一节第一句话中我特别声明了那两个字母代表向量，而在随后的公式中我没有特别声明，那么其中的字母默认是四元数.</p>
<h4 id="v_perp的旋转-1">2.2.2 <span
class="math inline">\(v_{\perp}\)</span>的旋转</h4>
<hr />
<p><span class="math display">\[
施工中...
\]</span></p>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p><span class="math inline">\(PROOF\)</span> <span
class="math display">\[
∥w∥ = ∥u \times v_{\perp}∥
\]</span> <span class="math display">\[
\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space\space
= ∥u∥ \cdot ∥v∥ \cdot \sin (\pi / 2)
\]</span> <span class="math display">\[
\space = ∥v_{\perp}∥
\]</span> <span class="math inline">\(Q.E.D.\)</span><a href="#fnref1"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

    </div>

    
    
    

    <footer class="post-footer">

        

    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Atsukko</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/atsukko" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"per_page":false,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"Atsukko","repo":"atsukko.github.io","client_id":"dd6d8730c6ee44e5c4ed","client_secret":"1dad8bcd77f8457cc3478a111b032bfdadd5f5d1","admin_user":"Atsukko","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"a34bd5f3c7cc7023789b02591951ea1b"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
